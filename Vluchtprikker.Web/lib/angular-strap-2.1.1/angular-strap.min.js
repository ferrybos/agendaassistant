!function (e, t) { "use strict"; angular.module("mgcrea.ngStrap", ["mgcrea.ngStrap.datepicker", "mgcrea.ngStrap.tooltip"]), angular.module("mgcrea.ngStrap.datepicker", ["mgcrea.ngStrap.helpers.dateParser", "mgcrea.ngStrap.tooltip"]).provider("$datepicker", function () { var e = this.defaults = { animation: "am-fade", prefixClass: "datepicker", placement: "bottom-left", template: "datepicker/datepicker.tpl.html", trigger: "focus", container: !1, keyboard: !0, html: !1, delay: 0, useNative: !1, dateType: "date", dateFormat: "shortDate", modelDateFormat: null, dayFormat: "dd", strictFormat: !1, autoclose: !1, minDate: -1 / 0, maxDate: +1 / 0, startView: 0, minView: 0, startWeek: 0, daysOfWeekDisabled: "", iconLeft: "glyphicon glyphicon-chevron-left", iconRight: "glyphicon glyphicon-chevron-right" }; this.$get = ["$window", "$document", "$rootScope", "$sce", "$locale", "dateFilter", "datepickerViews", "$tooltip", function (t, n, a, o, i, r, s, l) { function u(t, n, a) { function o(e) { e.selected = r.$isSelected(e.date) } function i() { t[0].focus() } var r = l(t, angular.extend({}, e, a)), u = a.scope, f = r.$options, g = r.$scope; f.startView && (f.startView -= f.minView); var h = s(r); r.$views = h.views; var p = h.viewDate; g.$mode = f.startView, g.$iconLeft = f.iconLeft, g.$iconRight = f.iconRight; var m = r.$views[g.$mode]; g.$select = function (e) { r.select(e) }, g.$selectPane = function (e) { r.$selectPane(e) }, g.$toggleMode = function () { r.setMode((g.$mode + 1) % r.$views.length) }, r.update = function (e) { angular.isDate(e) && !isNaN(e.getTime()) && (r.$date = e, m.update.call(m, e)), r.$build(!0) }, r.updateDisabledDates = function (e) { f.disabledDateRanges = e; for (var t = 0, n = g.rows.length; n > t; t++) angular.forEach(g.rows[t], r.$setDisabledEl) }, r.select = function (e, t) { angular.isDate(n.$dateValue) || (n.$dateValue = new Date(e)), !g.$mode || t ? (n.$setViewValue(angular.copy(e)), n.$render(), f.autoclose && !t && r.hide(!0)) : (angular.extend(p, { year: e.getFullYear(), month: e.getMonth(), date: e.getDate() }), r.setMode(g.$mode - 1), r.$build()) }, r.setMode = function (e) { g.$mode = e, m = r.$views[g.$mode], r.$build() }, r.$build = function (e) { e === !0 && m.built || (e !== !1 || m.built) && m.build.call(m) }, r.$updateSelected = function () { for (var e = 0, t = g.rows.length; t > e; e++) angular.forEach(g.rows[e], o) }, r.$isSelected = function (e) { return m.isSelected(e) }, r.$setDisabledEl = function (e) { e.disabled = m.isDisabled(e.date) }, r.$selectPane = function (e) { var t = m.steps, n = new Date(Date.UTC(p.year + (t.year || 0) * e, p.month + (t.month || 0) * e, p.date + (t.day || 0) * e)); angular.extend(p, { year: n.getUTCFullYear(), month: n.getUTCMonth(), date: n.getUTCDate() }), r.$build() }, r.$onMouseDown = function (e) { if (e.preventDefault(), e.stopPropagation(), c) { var t = angular.element(e.target); "button" !== t[0].nodeName.toLowerCase() && (t = t.parent()), t.triggerHandler("click") } }, r.$onKeyDown = function (e) { if (/(38|37|39|40|13)/.test(e.keyCode) && !e.shiftKey && !e.altKey) { if (e.preventDefault(), e.stopPropagation(), 13 === e.keyCode) return g.$mode ? g.$apply(function () { r.setMode(g.$mode - 1) }) : r.hide(!0); m.onKeyDown(e), u.$digest() } }; var $ = r.init; r.init = function () { return d && f.useNative ? (t.prop("type", "date"), void t.css("-webkit-appearance", "textfield")) : (c && (t.prop("type", "text"), t.attr("readonly", "true"), t.on("click", i)), void $()) }; var y = r.destroy; r.destroy = function () { d && f.useNative && t.off("click", i), y() }; var w = r.show; r.show = function () { w(), setTimeout(function () { r.$element.on(c ? "touchstart" : "mousedown", r.$onMouseDown), f.keyboard && t.on("keydown", r.$onKeyDown) }) }; var D = r.hide; return r.hide = function (e) { r.$element.off(c ? "touchstart" : "mousedown", r.$onMouseDown), f.keyboard && t.off("keydown", r.$onKeyDown), D(e) }, r } var d = (angular.element(t.document.body), /(ip(a|o)d|iphone|android)/gi.test(t.navigator.userAgent)), c = "createTouch" in t.document && d; return e.lang || (e.lang = i.id), u.defaults = e, u }] }).directive("bsDatepicker", ["$window", "$parse", "$q", "$locale", "dateFilter", "$datepicker", "$dateParser", "$timeout", function (e, t, n, a, o, i, r) { var s = (i.defaults, /(ip(a|o)d|iphone|android)/gi.test(e.navigator.userAgent)), l = function (e) { return !isNaN(parseFloat(e)) && isFinite(e) }; return { restrict: "EAC", require: "ngModel", link: function (e, t, n, a) { function u(e) { return e && e.length ? e : null } var d = { scope: e, controller: a }; angular.forEach(["placement", "container", "delay", "trigger", "keyboard", "html", "animation", "template", "autoclose", "dateType", "dateFormat", "modelDateFormat", "dayFormat", "strictFormat", "startWeek", "startDate", "useNative", "lang", "startView", "minView", "iconLeft", "iconRight", "daysOfWeekDisabled"], function (e) { angular.isDefined(n[e]) && (d[e] = n[e]) }), n.bsShow && e.$watch(n.bsShow, function (e) { c && angular.isDefined(e) && (angular.isString(e) && (e = !!e.match(",?(datepicker),?")), e === !0 ? c.show() : c.hide()) }); var c = i(t, a, d); d = c.$options, s && d.useNative && (d.dateFormat = "yyyy-MM-dd"), angular.forEach(["minDate", "maxDate"], function (e) { angular.isDefined(n[e]) && n.$observe(e, function (t) { if ("today" === t) { var n = new Date; c.$options[e] = +new Date(n.getFullYear(), n.getMonth(), n.getDate() + ("maxDate" === e ? 1 : 0), 0, 0, 0, "minDate" === e ? 0 : -1) } else c.$options[e] = angular.isString(t) && t.match(/^".+"$/) ? +new Date(t.substr(1, t.length - 2)) : l(t) ? +new Date(parseInt(t, 10)) : angular.isString(t) && 0 === t.length ? "maxDate" === e ? +1 / 0 : -1 / 0 : +new Date(t); !isNaN(c.$options[e]) && c.$build(!1) }) }), e.$watch(n.ngModel, function () { c.update(a.$dateValue) }, !0), angular.isDefined(n.disabledDates) && e.$watch(n.disabledDates, function (e, t) { e = u(e), t = u(t), e !== t && c.updateDisabledDates(e) }); var f = r({ format: d.dateFormat, lang: d.lang, strict: d.strictFormat }); a.$parsers.unshift(function (e) { if (!e) return void a.$setValidity("date", !0); var t = f.parse(e, a.$dateValue); if (!t || isNaN(t.getTime())) return void a.$setValidity("date", !1); var n = isNaN(c.$options.minDate) || t.getTime() >= c.$options.minDate, i = isNaN(c.$options.maxDate) || t.getTime() <= c.$options.maxDate, r = n && i; return a.$setValidity("date", r), a.$setValidity("min", n), a.$setValidity("max", i), r && (a.$dateValue = t), "string" === d.dateType ? o(t, d.modelDateFormat || d.dateFormat) : "number" === d.dateType ? a.$dateValue.getTime() : "iso" === d.dateType ? a.$dateValue.toISOString() : new Date(a.$dateValue) }), a.$formatters.push(function (e) { var t; return t = angular.isUndefined(e) || null === e ? 0 / 0 : angular.isDate(e) ? e : "string" === d.dateType ? f.parse(e, null, d.modelDateFormat) : new Date(e), a.$dateValue = t, a.$dateValue }), a.$render = function () { t.val(!a.$dateValue || isNaN(a.$dateValue.getTime()) ? "" : o(a.$dateValue, d.dateFormat)) }, e.$on("$destroy", function () { c && c.destroy(), d = null, c = null }) } } }]).provider("datepickerViews", function () { function e(e, t) { for (var n = []; e.length > 0;) n.push(e.splice(0, t)); return n } function t(e, t) { return (e % t + t) % t } this.defaults = { dayFormat: "dd", daySplit: 7 }; this.$get = ["$locale", "$sce", "dateFilter", function (n, a, o) { return function (i) { var r = i.$scope, s = i.$options, l = n.DATETIME_FORMATS.SHORTDAY, u = l.slice(s.startWeek).concat(l.slice(0, s.startWeek)), d = a.trustAsHtml('<th class="dow text-center">' + u.join('</th><th class="dow text-center">') + "</th>"), c = i.$date || (s.startDate ? new Date(s.startDate) : new Date), f = { year: c.getFullYear(), month: c.getMonth(), date: c.getDate() }, g = (6e4 * c.getTimezoneOffset(), [{ format: s.dayFormat, split: 7, steps: { month: 1 }, update: function (e, t) { !this.built || t || e.getFullYear() !== f.year || e.getMonth() !== f.month ? (angular.extend(f, { year: i.$date.getFullYear(), month: i.$date.getMonth(), date: i.$date.getDate() }), i.$build()) : e.getDate() !== f.date && (f.date = i.$date.getDate(), i.$updateSelected()) }, build: function () { var n = new Date(f.year, f.month, 1), a = n.getTimezoneOffset(), l = new Date(+n - 864e5 * t(n.getDay() - s.startWeek, 7)), u = l.getTimezoneOffset(), c = (new Date).toDateString(); u !== a && (l = new Date(+l + 6e4 * (u - a))); for (var g, h = [], p = 0; 42 > p; p++) g = new Date(l.getFullYear(), l.getMonth(), l.getDate() + p), h.push({ date: g, isToday: g.toDateString() === c, label: o(g, this.format), selected: i.$date && this.isSelected(g), muted: g.getMonth() !== f.month, disabled: this.isDisabled(g) }); r.title = o(n, "MMMM yyyy"), r.showLabels = !0, r.labels = d, r.rows = e(h, this.split), this.built = !0 }, isSelected: function (e) { return i.$date && e.getFullYear() === i.$date.getFullYear() && e.getMonth() === i.$date.getMonth() && e.getDate() === i.$date.getDate() }, isDisabled: function (e) { var t = e.getTime(); if (t < s.minDate || t > s.maxDate) return !0; if (-1 !== s.daysOfWeekDisabled.indexOf(e.getDay())) return !0; if (s.disabledDateRanges) for (var n = 0; n < s.disabledDateRanges.length; n++) if (t >= s.disabledDateRanges[n].start) return t <= s.disabledDateRanges[n].end ? !0 : !1; return !1 }, onKeyDown: function (e) { var t, n = i.$date.getTime(); 37 === e.keyCode ? t = new Date(n - 864e5) : 38 === e.keyCode ? t = new Date(n - 6048e5) : 39 === e.keyCode ? t = new Date(n + 864e5) : 40 === e.keyCode && (t = new Date(n + 6048e5)), this.isDisabled(t) || i.select(t, !0) } }, { name: "month", format: "MMM", split: 4, steps: { year: 1 }, update: function (e) { this.built && e.getFullYear() === f.year ? e.getMonth() !== f.month && (angular.extend(f, { month: i.$date.getMonth(), date: i.$date.getDate() }), i.$updateSelected()) : (angular.extend(f, { year: i.$date.getFullYear(), month: i.$date.getMonth(), date: i.$date.getDate() }), i.$build()) }, build: function () { for (var t, n = (new Date(f.year, 0, 1), []), a = 0; 12 > a; a++) t = new Date(f.year, a, 1), n.push({ date: t, label: o(t, this.format), selected: i.$isSelected(t), disabled: this.isDisabled(t) }); r.title = o(t, "yyyy"), r.showLabels = !1, r.rows = e(n, this.split), this.built = !0 }, isSelected: function (e) { return i.$date && e.getFullYear() === i.$date.getFullYear() && e.getMonth() === i.$date.getMonth() }, isDisabled: function (e) { var t = +new Date(e.getFullYear(), e.getMonth() + 1, 0); return t < s.minDate || e.getTime() > s.maxDate }, onKeyDown: function (e) { var t = i.$date.getMonth(), n = new Date(i.$date); 37 === e.keyCode ? n.setMonth(t - 1) : 38 === e.keyCode ? n.setMonth(t - 4) : 39 === e.keyCode ? n.setMonth(t + 1) : 40 === e.keyCode && n.setMonth(t + 4), this.isDisabled(n) || i.select(n, !0) } }, { name: "year", format: "yyyy", split: 4, steps: { year: 12 }, update: function (e, t) { !this.built || t || parseInt(e.getFullYear() / 20, 10) !== parseInt(f.year / 20, 10) ? (angular.extend(f, { year: i.$date.getFullYear(), month: i.$date.getMonth(), date: i.$date.getDate() }), i.$build()) : e.getFullYear() !== f.year && (angular.extend(f, { year: i.$date.getFullYear(), month: i.$date.getMonth(), date: i.$date.getDate() }), i.$updateSelected()) }, build: function () { for (var t, n = f.year - f.year % (3 * this.split), a = [], s = 0; 12 > s; s++) t = new Date(n + s, 0, 1), a.push({ date: t, label: o(t, this.format), selected: i.$isSelected(t), disabled: this.isDisabled(t) }); r.title = a[0].label + "-" + a[a.length - 1].label, r.showLabels = !1, r.rows = e(a, this.split), this.built = !0 }, isSelected: function (e) { return i.$date && e.getFullYear() === i.$date.getFullYear() }, isDisabled: function (e) { var t = +new Date(e.getFullYear() + 1, 0, 0); return t < s.minDate || e.getTime() > s.maxDate }, onKeyDown: function (e) { var t = i.$date.getFullYear(), n = new Date(i.$date); 37 === e.keyCode ? n.setYear(t - 1) : 38 === e.keyCode ? n.setYear(t - 4) : 39 === e.keyCode ? n.setYear(t + 1) : 40 === e.keyCode && n.setYear(t + 4), this.isDisabled(n) || i.select(n, !0) } }]); return { views: s.minView ? Array.prototype.slice.call(g, s.minView) : g, viewDate: f } } }] }), angular.module("mgcrea.ngStrap.helpers.dateParser", []).provider("$dateParser", ["$localeProvider", function () { function e() { } var t = Date.prototype, n = this.defaults = { format: "shortDate", strict: !1 }; this.$get = ["$locale", "dateFilter", function (a, o) { var i = function (i) { function r(e) { var t, n = Object.keys(h), a = [], o = [], i = e; for (t = 0; t < n.length; t++) if (e.split(n[t]).length > 1) { var r = i.search(n[t]); e = e.split(n[t]).join(""), h[n[t]] && (a[r] = h[n[t]]) } return angular.forEach(a, function (e) { e && o.push(e) }), o } function s(e) { return e.replace(/\//g, "[\\/]").replace("/-/g", "[-]").replace(/\./g, "[.]").replace(/\\s/g, "[\\s]") } function l(e) { var t, n = Object.keys(g), a = e; for (t = 0; t < n.length; t++) a = a.split(n[t]).join("${" + t + "}"); for (t = 0; t < n.length; t++) a = a.split("${" + t + "}").join("(" + g[n[t]] + ")"); return e = s(e), new RegExp("^" + a + "$", ["i"]) } var u, d, c = angular.extend({}, n, i), f = {}, g = { sss: "[0-9]{3}", ss: "[0-5][0-9]", s: c.strict ? "[1-5]?[0-9]" : "[0-9]|[0-5][0-9]", mm: "[0-5][0-9]", m: c.strict ? "[1-5]?[0-9]" : "[0-9]|[0-5][0-9]", HH: "[01][0-9]|2[0-3]", H: c.strict ? "1?[0-9]|2[0-3]" : "[01]?[0-9]|2[0-3]", hh: "[0][1-9]|[1][012]", h: c.strict ? "[1-9]|1[012]" : "0?[1-9]|1[012]", a: "AM|PM", EEEE: a.DATETIME_FORMATS.DAY.join("|"), EEE: a.DATETIME_FORMATS.SHORTDAY.join("|"), dd: "0[1-9]|[12][0-9]|3[01]", d: c.strict ? "[1-9]|[1-2][0-9]|3[01]" : "0?[1-9]|[1-2][0-9]|3[01]", MMMM: a.DATETIME_FORMATS.MONTH.join("|"), MMM: a.DATETIME_FORMATS.SHORTMONTH.join("|"), MM: "0[1-9]|1[012]", M: c.strict ? "[1-9]|1[012]" : "0?[1-9]|1[012]", yyyy: "[1]{1}[0-9]{3}|[2]{1}[0-9]{3}", yy: "[0-9]{2}", y: c.strict ? "-?(0|[1-9][0-9]{0,3})" : "-?0*[0-9]{1,4}" }, h = { sss: t.setMilliseconds, ss: t.setSeconds, s: t.setSeconds, mm: t.setMinutes, m: t.setMinutes, HH: t.setHours, H: t.setHours, hh: t.setHours, h: t.setHours, EEEE: e, EEE: e, dd: t.setDate, d: t.setDate, a: function (e) { var t = this.getHours() % 12; return this.setHours(e.match(/pm/i) ? t + 12 : t) }, MMMM: function (e) { return this.setMonth(a.DATETIME_FORMATS.MONTH.indexOf(e)) }, MMM: function (e) { return this.setMonth(a.DATETIME_FORMATS.SHORTMONTH.indexOf(e)) }, MM: function (e) { return this.setMonth(1 * e - 1) }, M: function (e) { return this.setMonth(1 * e - 1) }, yyyy: t.setFullYear, yy: function (e) { return this.setFullYear(2e3 + 1 * e) }, y: t.setFullYear }; return f.init = function () { f.$format = a.DATETIME_FORMATS[c.format] || c.format, u = l(f.$format), d = r(f.$format) }, f.isValid = function (e) { return angular.isDate(e) ? !isNaN(e.getTime()) : u.test(e) }, f.parse = function (e, t, n) { angular.isDate(e) && (e = o(e, n || f.$format)); var a = n ? l(n) : u, i = n ? r(n) : d, s = a.exec(e); if (!s) return !1; for (var c = t && !isNaN(t.getTime()) ? t : new Date(1970, 0, 1, 0), g = 0; g < s.length - 1; g++) i[g] && i[g].call(c, s[g + 1]); return c }, f.init(), f }; return i }] }]), angular.module("mgcrea.ngStrap.helpers.dimensions", []).factory("dimensions", ["$document", "$window", function () { var t = (angular.element, {}), n = t.nodeName = function (e, t) { return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase() }; t.css = function (t, n, a) { var o; return o = t.currentStyle ? t.currentStyle[n] : e.getComputedStyle ? e.getComputedStyle(t)[n] : t.style[n], a === !0 ? parseFloat(o) || 0 : o }, t.offset = function (t) { var n = t.getBoundingClientRect(), a = t.ownerDocument; return { width: n.width || t.offsetWidth, height: n.height || t.offsetHeight, top: n.top + (e.pageYOffset || a.documentElement.scrollTop) - (a.documentElement.clientTop || 0), left: n.left + (e.pageXOffset || a.documentElement.scrollLeft) - (a.documentElement.clientLeft || 0) } }, t.position = function (e) { var o, i, r = { top: 0, left: 0 }; return "fixed" === t.css(e, "position") ? i = e.getBoundingClientRect() : (o = a(e), i = t.offset(e), i = t.offset(e), n(o, "html") || (r = t.offset(o)), r.top += t.css(o, "borderTopWidth", !0), r.left += t.css(o, "borderLeftWidth", !0)), { width: e.offsetWidth, height: e.offsetHeight, top: i.top - r.top - t.css(e, "marginTop", !0), left: i.left - r.left - t.css(e, "marginLeft", !0) } }; var a = function (e) { var a = e.ownerDocument, o = e.offsetParent || a; if (n(o, "#document")) return a.documentElement; for (; o && !n(o, "html") && "static" === t.css(o, "position") ;) o = o.offsetParent; return o || a.documentElement }; return t.height = function (e, n) { var a = e.offsetHeight; return n ? a += t.css(e, "marginTop", !0) + t.css(e, "marginBottom", !0) : a -= t.css(e, "pCreateingTop", !0) + t.css(e, "pCreateingBottom", !0) + t.css(e, "borderTopWidth", !0) + t.css(e, "borderBottomWidth", !0), a }, t.width = function (e, n) { var a = e.offsetWidth; return n ? a += t.css(e, "marginLeft", !0) + t.css(e, "marginRight", !0) : a -= t.css(e, "pCreateingLeft", !0) + t.css(e, "pCreateingRight", !0) + t.css(e, "borderLeftWidth", !0) + t.css(e, "borderRightWidth", !0), a }, t }]), angular.module("mgcrea.ngStrap.helpers.parseOptions", []).provider("$parseOptions", function () { var e = this.defaults = { regexp: /^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/ }; this.$get = ["$parse", "$q", function (t, n) { function a(a, o) { function i(e, t) { return e.map(function (e, n) { var a, o, i = {}; return i[d] = e, a = u(t, i), o = g(t, i) || n, { label: a, value: o, index: n } }) } var r = {}, s = angular.extend({}, e, o); r.$values = []; var l, u, d, c, f, g, h; return r.init = function () { r.$match = l = a.match(s.regexp), u = t(l[2] || l[1]), d = l[4] || l[6], c = l[5], f = t(l[3] || ""), g = t(l[2] ? l[1] : d), h = t(l[7]) }, r.valuesFn = function (e, t) { return n.when(h(e, t)).then(function (t) { return r.$values = t ? i(t, e) : {}, r.$values }) }, r.init(), r } return a }] }), angular.version.minor < 3 && angular.version.dot < 14 && angular.module("ng").factory("$$rAF", ["$window", "$timeout", function (e, t) { var n = e.requestAnimationFrame || e.webkitRequestAnimationFrame || e.mozRequestAnimationFrame, a = e.cancelAnimationFrame || e.webkitCancelAnimationFrame || e.mozCancelAnimationFrame || e.webkitCancelRequestAnimationFrame, o = !!n, i = o ? function (e) { var t = n(e); return function () { a(t) } } : function (e) { var n = t(e, 16.66, !1); return function () { t.cancel(n) } }; return i.supported = o, i }]), angular.module("mgcrea.ngStrap.tooltip", ["mgcrea.ngStrap.helpers.dimensions"]).provider("$tooltip", function () { var e = this.defaults = { animation: "am-fade", customClass: "", prefixClass: "tooltip", prefixEvent: "tooltip", container: !1, target: !1, placement: "top", template: "tooltip/tooltip.tpl.html", contentTemplate: !1, trigger: "hover focus", keyboard: !1, html: !1, show: !1, title: "", type: "", delay: 0 }; this.$get = ["$window", "$rootScope", "$compile", "$q", "$templateCache", "$http", "$animate", "dimensions", "$$rAF", function (n, a, o, i, r, s, l, u, d) { function c(t, n) { function i() { D.$emit(w.prefixEvent + ".show", $) } function r() { return D.$emit(w.prefixEvent + ".hide", $), blur && "focus" === w.trigger ? t[0].blur() : void 0 } function s() { return "body" === w.container ? u.offset(w.target[0] || t[0]) : u.position(w.target[0] || t[0]) } function c(e, t, n, a) { var o, i = e.split("-"); switch (i[0]) { case "right": o = { top: t.top + t.height / 2 - a / 2, left: t.left + t.width }; break; case "bottom": o = { top: t.top + t.height, left: t.left + t.width / 2 - n / 2 }; break; case "left": o = { top: t.top + t.height / 2 - a / 2, left: t.left - n }; break; default: o = { top: t.top - a, left: t.left + t.width / 2 - n / 2 } } if (!i[1]) return o; if ("top" === i[0] || "bottom" === i[0]) switch (i[1]) { case "left": o.left = t.left; break; case "right": o.left = t.left + t.width - n } else if ("left" === i[0] || "right" === i[0]) switch (i[1]) { case "top": o.top = t.top - a; break; case "bottom": o.top = t.top + t.height } return o } var $ = {}, y = t[0].nodeName.toLowerCase(), w = $.$options = angular.extend({}, e, n); $.$promise = g(w.template); var D = $.$scope = w.scope && w.scope.$new() || a.$new(); if (w.delay && angular.isString(w.delay)) { var v = w.delay.split(",").map(parseFloat); w.delay = v.length > 1 ? { show: v[0], hide: v[1] } : v[0] } w.title && ($.$scope.title = w.title), D.$hide = function () { D.$$postDigest(function () { $.hide() }) }, D.$show = function () { D.$$postDigest(function () { $.show() }) }, D.$toggle = function () { D.$$postDigest(function () { $.toggle() }) }, $.$isShown = D.$isShown = !1; var b, M; w.contentTemplate && ($.$promise = $.$promise.then(function (e) { var t = angular.element(e); return g(w.contentTemplate).then(function (e) { var n = f('[ng-bind="content"]', t[0]); return n.length || (n = f('[ng-bind="title"]', t[0])), n.removeAttr("ng-bind").html(e), t[0].outerHTML }) })); var T, F, S, k; return $.$promise.then(function (e) { angular.isObject(e) && (e = e.data), w.html && (e = e.replace(m, 'ng-bind-html="')), e = h.apply(e), S = e, T = o(e), $.init() }), $.init = function () { w.delay && angular.isNumber(w.delay) && (w.delay = { show: w.delay, hide: w.delay }), "self" === w.container ? k = t : angular.isElement(w.container) ? k = w.container : w.container && (k = f(w.container)); var e = w.trigger.split(" "); angular.forEach(e, function (e) { "click" === e ? t.on("click", $.toggle) : "manual" !== e && (t.on("hover" === e ? "mouseenter" : "focus", $.enter), t.on("hover" === e ? "mouseleave" : "blur", $.leave), "button" === y && "hover" !== e && t.on(p ? "touchstart" : "mousedown", $.$onFocusElementMouseDown)) }), w.target && (w.target = angular.isElement(w.target) ? w.target : f(w.target)), w.show && D.$$postDigest(function () { "focus" === w.trigger ? t[0].focus() : $.show() }) }, $.destroy = function () { for (var e = w.trigger.split(" "), n = e.length; n--;) { var a = e[n]; "click" === a ? t.off("click", $.toggle) : "manual" !== a && (t.off("hover" === a ? "mouseenter" : "focus", $.enter), t.off("hover" === a ? "mouseleave" : "blur", $.leave), "button" === y && "hover" !== a && t.off(p ? "touchstart" : "mousedown", $.$onFocusElementMouseDown)) } F && (F.remove(), F = null), clearTimeout(b), D.$destroy() }, $.enter = function () { return clearTimeout(b), M = "in", w.delay && w.delay.show ? void (b = setTimeout(function () { "in" === M && $.show() }, w.delay.show)) : $.show() }, $.show = function () { D.$emit(w.prefixEvent + ".show.before", $); var e = w.container ? k : null, n = w.container ? null : t; F && F.remove(), F = $.$element = T(D, function () { }), F.css({ top: "-9999px", left: "-9999px", display: "block", visibility: "hidden" }).addClass(w.placement), w.animation && F.addClass(w.animation), w.type && F.addClass(w.prefixClass + "-" + w.type), w.customClass && F.addClass(w.customClass); var a = l.enter(F, e, n, i); a && a.then && a.then(i), $.$isShown = D.$isShown = !0, D.$$phase || D.$root && D.$root.$$phase || D.$digest(), d(function () { $.$applyPlacement(), F.css({ visibility: "visible" }) }), w.keyboard && ("focus" !== w.trigger ? ($.focus(), F.on("keyup", $.$onKeyUp)) : t.on("keyup", $.$onFocusKeyUp)) }, $.leave = function () { return clearTimeout(b), M = "out", w.delay && w.delay.hide ? void (b = setTimeout(function () { "out" === M && $.hide() }, w.delay.hide)) : $.hide() }, $.hide = function () { if ($.$isShown) { D.$emit(w.prefixEvent + ".hide.before", $); var e = l.leave(F, r); e && e.then && e.then(r), $.$isShown = D.$isShown = !1, D.$$phase || D.$root && D.$root.$$phase || D.$digest(), w.keyboard && null !== F && F.off("keyup", $.$onKeyUp) } }, $.toggle = function () { $.$isShown ? $.leave() : $.enter() }, $.focus = function () { F[0].focus() }, $.$applyPlacement = function () { if (F) { var e = s(), t = F.prop("offsetWidth"), n = F.prop("offsetHeight"), a = c(w.placement, e, t, n); a.top += "px", a.left += "px", F.css(a) } }, $.$onKeyUp = function (e) { 27 === e.which && $.$isShown && ($.hide(), e.stopPropagation()) }, $.$onFocusKeyUp = function (e) { 27 === e.which && (t[0].blur(), e.stopPropagation()) }, $.$onFocusElementMouseDown = function (e) { e.preventDefault(), e.stopPropagation(), $.$isShown ? t[0].blur() : t[0].focus() }, $ } function f(e, n) { return angular.element((n || t).querySelectorAll(e)) } function g(e) { return i.when(r.get(e) || s.get(e)).then(function (t) { return angular.isObject(t) ? (r.put(e, t.data), t.data) : t }) } var h = String.prototype.trim, p = "createTouch" in n.document, m = /ng-bind="/gi; return c }] }).directive("bsTooltip", ["$window", "$location", "$sce", "$tooltip", "$$rAF", function (e, t, n, a, o) { return { restrict: "EAC", scope: !0, link: function (e, t, i) { var r = { scope: e }; angular.forEach(["template", "contentTemplate", "placement", "container", "target", "delay", "trigger", "keyboard", "html", "animation", "type", "customClass"], function (e) { angular.isDefined(i[e]) && (r[e] = i[e]) }), i.$observe("title", function (t, a) { e.title = n.trustAsHtml(t), angular.isDefined(a) && o(function () { s && s.$applyPlacement() }) }), i.bsTooltip && e.$watch(i.bsTooltip, function (t, n) { angular.isObject(t) ? angular.extend(e, t) : e.title = t, angular.isDefined(n) && o(function () { s && s.$applyPlacement() }) }, !0), i.bsShow && e.$watch(i.bsShow, function (e) { s && angular.isDefined(e) && (angular.isString(e) && (e = !!e.match(",?(tooltip),?")), e === !0 ? s.show() : s.hide()) }); var s = a(t, r); e.$on("$destroy", function () { s && s.destroy(), r = null, s = null }) } } }]) }(window, document);